<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' file:; font-src 'self' data:;">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wedding Venue Comparer</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header>
      <h1>Wedding Venue Comparer</h1>
      <div class="controls">
        <input id="search" placeholder="Search by name" aria-label="Search venues">
        <select id="sort" aria-label="Sort venues">
          <option value="total">Sort: Total Cost</option>
          <option value="name">Sort: Name</option>
          <option value="date">Sort: Date Added</option>
        </select>
        <button id="compareBtn" class="hidden" aria-label="Compare selected venues">Compare (<span id="compareCount">0</span>)</button>
        <button id="deleteSelectedBtn" class="hidden btn-danger" aria-label="Delete selected venues">Delete (<span id="deleteCount">0</span>)</button>
        <button id="addBtn" aria-label="Add new venue">Add Venue</button>
        <button id="exportBtn" aria-label="Export to CSV">Export CSV</button>
      </div>
    </header>

    <main>
      <div id="venuesContainer" class="venues"></div>
    </main>

    <!-- Add/Edit Modal -->
    <div id="modal" class="modal hidden">
      <div class="modal-content">
        <h2 id="modalTitle">Add Venue</h2>
        <form id="venueForm">
          <div class="form-layout">
            <div class="left">
              <label class="full">Name<input name="name" required aria-required="true"></label>
              <div class="title-photo-area">
                <div class="title-photo-help muted">Tip: click any photo thumbnail below to mark it as the title photo.</div>
                <div id="titlePhotoPreview" class="title-photo-preview" aria-label="Title photo preview"></div>
                <input type="hidden" name="title_photo" id="title_photo_input">
              </div>
              <div class="row">
                <label>Guests
                  <div class="slider-wrap">
                    <button type="button" class="slider-btn" id="guestDown" aria-label="Decrease guests">âˆ’</button>
                    <input name="guest_count" id="guest_count" type="range" min="0" max="250" step="1" value="100" aria-label="Number of guests">
                    <button type="button" class="slider-btn" id="guestUp" aria-label="Increase guests">+</button>
                    <span id="guestBadge" aria-live="polite">100</span>
                  </div>
                </label>
                <label>Duration (hrs) <span class="help-tip" data-tip="Total event time (e.g., ceremony + reception).">?</span>
                  <div class="slider-wrap">
                    <button type="button" class="slider-btn" id="durationDown" aria-label="Decrease duration">âˆ’</button>
                    <input name="event_duration_hours" id="event_duration_hours" type="range" min="0" max="24" step="0.5" value="4" aria-label="Event duration in hours">
                    <button type="button" class="slider-btn" id="durationUp" aria-label="Increase duration">+</button>
                    <span id="durationBadge" aria-live="polite">4</span>
                  </div>
                </label>
              </div>
              <label class="full">Notes<textarea name="notes" aria-label="Additional notes"></textarea></label>
              <div class="photos-placeholder">
                <div class="photo-actions">
                  <button type="button" id="addPhotos">ðŸ“· Browse Photos</button>
                </div>
                <div id="dropZone" class="drop-zone">ðŸ“¸ Drag & drop photos here or click to browse</div>
                <div id="photoPreview" class="photo-preview"></div>
                <span id="photoCount" class="muted">0 photos</span>
              </div>
            </div>
            <div class="right">
              
              <div class="cost-cards">
                <div class="card cost-card">
                  <div class="card-header">Venue Rental <span class="help-tip" data-tip="Base rental fee charged by the venue (space + basic amenities).">?</span></div>
                  <div class="card-body">
                    <label class="input-label" for="venue_rental_cost">Amount</label>
                    <input id="venue_rental_cost" name="venue_rental_cost" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$">
                  </div>
                </div>
                <div class="card cost-card">
                  <div class="card-header">Catering <span class="help-tip" data-tip="Food cost per guest plus any flat service or staffing fees.">?</span></div>
                    <div class="card-body">
                          <label class="input-label" for="catering_per_person">Per Person</label>
                          <input id="catering_per_person" name="catering_per_person" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$/person">
                          <label class="input-label" for="catering_flat_fee">Flat Fee</label>
                          <input id="catering_flat_fee" name="catering_flat_fee" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$">
                          <div id="cateringPreview" class="muted"></div>
                    </div>
                </div>
                <div class="card cost-card">
                  <div class="card-header">Bar Service <span class="help-tip" data-tip="Alcohol service per guest plus any bartender or setup fees.">?</span></div>
                  <div class="card-body">
                      <label class="input-label" for="bar_service_rate">Per Person</label>
                      <input id="bar_service_rate" name="bar_service_rate" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$/person">
                      <label class="input-label" for="bar_flat_fee">Flat Fee</label>
                      <input id="bar_flat_fee" name="bar_flat_fee" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$">
                      <div id="barPreview" class="muted"></div>
                      <input name="bar_service_type" type="hidden" value="per_person">
                  </div>
                </div>
                <div class="card cost-card">
                  <div class="card-header">Coordinator Fee <span class="help-tip" data-tip="Planner or day-of coordinator fees not covered by the venue.">?</span></div>
                  <div class="card-body">
                    <label class="input-label" for="coordinator_fee">Amount</label>
                    <input id="coordinator_fee" name="coordinator_fee" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$">
                  </div>
                </div>
                <div class="card cost-card">
                  <div class="card-header">Event Insurance <span class="help-tip" data-tip="Liability or special event insurance required by the venue.">?</span></div>
                  <div class="card-body">
                    <label class="input-label" for="event_insurance">Amount</label>
                    <input id="event_insurance" name="event_insurance" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$">
                  </div>
                </div>
                <div class="card cost-card">
                  <div class="card-header">Other Costs <span class="help-tip" data-tip="Miscellaneous expenses: decor, rentals, travel, permits, etc.">?</span></div>
                  <div class="card-body">
                    <label class="input-label" for="other_costs">Amount</label>
                    <input id="other_costs" name="other_costs" class="cost-input" type="number" min="0" step="0.01" value="0" placeholder="$">
                  </div>
                </div>
              </div>

              <!-- Summary panel moved into right column to avoid overlap -->
              <div class="summary-panel" role="region" aria-label="Cost summary">
                <div>Summary</div>
                <div class="total" id="summaryTotal" aria-live="polite">$0.00</div>
                <div id="summaryPerGuest" class="muted" aria-live="polite">Per guest: $0.00</div>
              </div>

            </div>
          </div>

          
          <div class="form-actions">
            <div class="spacer"></div>
            <div>Total: <span id="calculatedTotal">$0.00</span></div>
            <button type="submit">Save</button>
            <button type="button" id="cancelBtn">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Detail view -->
    <div id="detail" class="modal hidden">
      <div class="modal-content">
        <button id="closeDetail">Close</button>
        <div id="detailContent"></div>
      </div>
    </div>

    <!-- Comparison view -->
    <div id="compareModal" class="modal hidden">
      <div class="modal-content compare-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h2>Venue Comparison</h2>
          <button id="closeCompare" aria-label="Close comparison">Close</button>
        </div>
        <div id="compareContent" class="comparison-table"></div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
